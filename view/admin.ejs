<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" href="/images/icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="stylesheet" href="/CSS/Header.css">
    <link rel="stylesheet" href="/CSS/admin.css">
</head>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const password = prompt("Enter the company password:");

        if (password === null) {
            // User canceled the prompt
            alert("Access denied.");
            window.location.href = '/';
            return;
        }

        fetch('/admin', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ password: password })
        })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    window.location.href = '/';
                    throw new Error("Invalid password");
                }
            })
            .then(data => {
                if (!data.accessGranted) {
                    window.location.href = '/';
                    alert("Access denied. Incorrect password.");
                } else if (data.status == 200) {
                    const container = document.getElementById('container');
                    container.style.display = 'display';
                }
            })
            .catch(error => {
                alert(error.message);
                window.location.href = '/';
            });
    });
</script>

<body>
    <div id="container">
        <%- include('header') %> <!-- This includes the header.html content -->
            <div class="content">
            </div>
    </div>
</body>

</html>